<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>لوحة التحكم - الكابتن</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #0f0f0f, #1e1e1e);
      color: #fff;
      text-align: center;
      padding: 20px;
      margin: 0;
    }
    h1 {
      color: gold;
      margin-bottom: 20px;
    }
    .container {
      max-width: 700px;
      margin: auto;
      background: #1a1a1a;
      padding: 25px;
      border-radius: 15px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.6);
    }
    input, textarea {
      width: 90%;
      padding: 12px;
      margin: 8px 0;
      border-radius: 12px;
      border: none;
      background: #333;
      color: #fff;
      font-weight: bold;
      transition: 0.3s;
    }
    input:focus, textarea:focus {
      background: #444;
      outline: none;
      transform: scale(1.03);
    }
    button {
      padding: 12px 25px;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      background: gold;
      color: #111;
      font-weight: bold;
      font-size: 15px;
      transition: 0.3s;
      margin-top: 10px;
    }
    button:hover {
      background: orange;
      transform: scale(1.05);
    }
    .clientCard {
      background: #111;
      padding: 15px;
      border-radius: 12px;
      margin: 15px 0;
      border-left: 5px solid gold;
      text-align: left;
    }
    .clientCard h3 {
      margin: 0;
      color: cyan;
    }
    .clientCard p {
      margin: 5px 0;
    }
    a {
      color: gold;
      text-decoration: none;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h1>⚡ لوحة التحكم - الكابتن</h1>
  
  <div class="container">
    <h2>➕ إضافة عميل جديد</h2>
    <input type="text" id="name" placeholder="اسم العميل">
    
    <!-- اختيار صورة أو فيديو -->
    <input type="file" id="media" accept="image/*,video/*">
    
    <textarea id="diet" placeholder="النظام الغذائي"></textarea>
    <textarea id="supplements" placeholder="المكملات"></textarea>
    <textarea id="exercises" placeholder="التمارين"></textarea>
    <input type="text" id="password" placeholder="الكود السري للعميل">
    <button onclick="addClient()">إضافة</button>
  </div>

  <div class="container">
    <h2>👥 العملاء</h2>
    <div id="clientsList"></div>
  </div>

  <script>
    let clients = JSON.parse(localStorage.getItem("clients")) || [];

    function saveClients() {
      localStorage.setItem("clients", JSON.stringify(clients));
      displayClients();
    }

    function addClient() {
      let name = document.getElementById("name").value;
      let mediaInput = document.getElementById("media");
      let diet = document.getElementById("diet").value;
      let supplements = document.getElementById("supplements").value;
      let exercises = document.getElementById("exercises").value;
      let password = document.getElementById("password").value;

      if(!name || !password){
        alert("❌ يجب كتابة الاسم والكود السري");
        return;
      }

      // لو مفيش ملف مرفوع
      if(mediaInput.files.length === 0){
        alert("❌ من فضلك اختر صورة أو فيديو للعميل");
        return;
      }

      let file = mediaInput.files[0];
      let reader = new FileReader();

      reader.onload = function(e) {
        let client = {
          id: Date.now(),
          name: name,
          media: e.target.result, // صورة أو فيديو Base64
          diet: diet,
          supplements: supplements,
          exercises: exercises,
          password: password
        };

        clients.push(client);
        saveClients();

        // تفريغ الحقول
        document.getElementById("name").value = "";
        document.getElementById("media").value = "";
        document.getElementById("diet").value = "";
        document.getElementById("supplements").value = "";
        document.getElementById("exercises").value = "";
        document.getElementById("password").value = "";
      };

      reader.readAsDataURL(file); // تحويل الصورة/الفيديو ل Base64
    }

    function displayClients() {
      let container = document.getElementById("clientsList");
      container.innerHTML = "";
      clients.forEach(client => {
        container.innerHTML += `
          <div class="clientCard">
            <h3>${client.name}</h3>
            <p>🔑 الكود: ${client.password}</p>
            <p><a href="client.html?id=${client.id}">➡️ صفحة العميل</a></p>
          </div>
        `;
      });
    }

    displayClients();
  </script>
</body>
</html>
